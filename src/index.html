<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<style>
    .mycards {
        width: 600px;
        margin: 30px auto 100px auto;
    }

    .profile_img {
        width: 100%;
        height: 250px;
        object-fit: cover;
    }
</style>

<body>
    <!-- 헤더 -->
    <header>

    </header>
    <!-- 팀 소개 -->
    <section>
        <h2>ABOUT</h2>
    </section>
    <!-- 팀원 소개 -->
    <section>
        <div class="mycards">
            <div id="card" class="row row-cols-1 row-cols-md-2 g-4">
            </div>
        </div>
    </section>
</body>

</html>

<script src="./modules/header.js" type="module"></script>


<!-- 파이어베이스 모듈 추가 -->
<script type="module">
    import { auth, fetchData } from './modules/firebase.js';
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";

    onAuthStateChanged(auth, (user) => {
        if (user) {
            console.log("로그인 상태입니다:", user.email);
        } else {
            console.log("로그인되지 않았습니다.");
        }
    });


    async function displayMemberData() {
        const data = await fetchData('members');
        data.forEach(member => {
            let name = member.name;
            let comment = member.comment;
            let img_url = member.img_url;
            let page_url = member.page_url;

            let temp_html = `
                <div class="col">
                    <div class="card h-100">
                        <img src="${img_url}" class="profile_img" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">${name}</h5>
                            <p class="card-text">${comment}</p>
                            <a href="${page_url}" class="btn btn-info">상세페이지</a>
                        </div>
                    </div>
                </div>`;

            $('#card').append(temp_html);
        });
    }

    displayMemberData();
</script>